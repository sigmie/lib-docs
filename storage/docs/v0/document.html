<ul class="table-of-contents">
<li>
<a href="#content-introduction">Introduction</a>
</li>
<li>
<a href="#content-collecting-an-index">Collecting an Index</a>
<ul>
<li>
<a href="#content-add-documents-async">Add Documents async</a>
</li>
<li>
<a href="#content-add-documents-sync">Add Documents sync</a>
</li>
</ul>
</li>
<li>
<a href="#content-document-id">Document _id</a>
<ul>
<li>
<a href="#content-add-document-with-an-id">Add Document with an _id</a>
</li>
<li>
<a href="#content-add-document-without-id">Add Document without _id</a>
</li>
</ul>
</li>
<li>
<a href="#content-update-a-document">Update a Document</a>
</li>
<li>
<a href="#content-iterate-over-index-documents">Iterate over Index Documents</a>
</li>
<li>
<a href="#content-clear-index-documents">Clear Index Documents</a>
</li>
<li>
<a href="#content-index-upsert">Index Upsert</a>
</li>
<li>
<a href="#content-more-methods">More Methods</a>
</li>
</ul>
<h2><a id="content-introduction" href="#content-introduction" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Introduction</h2>
<h2><a id="content-collecting-an-index" href="#content-collecting-an-index" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Collecting an Index</h2>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">get</span><span style="color: #89DDFF;">(</span><span style="color: #FFCB6B;">_id</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">rIapIQBhb8W_9CdjGoe</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">);</span></div></code></pre>
<h3><a id="content-add-documents-async" href="#content-add-documents-async" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Add Documents async</h3>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">docs </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">[</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">Mary Poppins</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">]),</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">The Mighty Ducks</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">]),</span></div><div class='line'><span style="color: #A6ACCD;">    </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">The Parent Trap</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">]),</span></div><div class='line'><span style="color: #89DDFF;">];</span></div><div class='line'>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">merge</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">docs</span><span style="color: #89DDFF;">);</span><span style="color: #A6ACCD;"> </span></div></code></pre>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">newIndex</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #89DDFF;">();</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">Mary Poppins</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">add</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">docs</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// 0 </span></div></code></pre>
<div class="callout warning">
Elasticsearch is **Near real-time** search.
</div>
<h3><a id="content-add-documents-sync" href="#content-add-documents-sync" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Add Documents sync</h3>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines has-add-lines has-remove-lines has-diff-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line line-remove line-has-background' style='background-color: #ff9cac20'><span style="color:#f07178; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">-</span><span style="color: #f07178;">$</span><span style="color: #f07178;">movies </span><span style="color: #f07178;">=</span><span style="color: #f07178;"> </span><span style="color: #f07178;">$</span><span style="color: #f07178;">sigmie</span><span style="color: #f07178;">-&gt;</span><span style="color: #f07178;">collect</span><span style="color: #f07178;">(</span><span style="color: #f07178;">&#39;</span><span style="color: #f07178;">movies</span><span style="color: #f07178;">&#39;</span><span style="color: #f07178;">);</span><span style="color: #f07178;">  </span></div><div class='line line-add line-has-background' style='background-color: #89DDFF20'><span style="color:#C3E88D; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">+</span><span style="color: #C3E88D;">$</span><span style="color: #C3E88D;">movies </span><span style="color: #C3E88D;">=</span><span style="color: #C3E88D;"> </span><span style="color: #C3E88D;">$</span><span style="color: #C3E88D;">sigmie</span><span style="color: #C3E88D;">-&gt;</span><span style="color: #C3E88D;">collect</span><span style="color: #C3E88D;">(</span><span style="color: #C3E88D;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #C3E88D;">&#39;</span><span style="color: #C3E88D;">,</span><span style="color: #C3E88D;"> </span><span style="color: #C3E88D;">refresh</span><span style="color: #C3E88D;">:</span><span style="color: #C3E88D;"> </span><span style="color: #C3E88D;">true);</span><span style="color: #C3E88D;"> </span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// 0</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">Mary Poppins</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">]);</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">add</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">docs</span><span style="color: #89DDFF;">);</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color:#676E95; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// 1 </span></div></code></pre>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines has-add-lines has-diff-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">);</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// 0</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">Mary Poppins</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">]);</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">add</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">docs</span><span style="color: #89DDFF;">);</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line line-add line-has-background' style='background-color: #89DDFF20'><span style="color:#C3E88D; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">+</span><span style="color: #C3E88D;">$</span><span style="color: #C3E88D;">movies</span><span style="color: #C3E88D;">-&gt;</span><span style="color: #C3E88D;">refresh</span><span style="color: #C3E88D;">();</span><span style="color: #C3E88D;"> </span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color:#676E95; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// 1 </span></div></code></pre>
<h2><a id="content-document-id" href="#content-document-id" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Document _id</h2>
<h3><a id="content-add-document-with-an-id" href="#content-add-document-with-an-id" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Add Document with an <code>_id</code></h3>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">add</span><span style="color: #89DDFF;">(</span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">(</span></div><div class='line'><span style="color: #A6ACCD;">              </span><span style="color: #FFCB6B;">_source</span><span style="color: #A6ACCD;">: </span><span style="color: #89DDFF;">[</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">Mary Poppins</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">],</span></div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #A6ACCD;">              </span><span style="color: #FFCB6B;">_id</span><span style="color: #A6ACCD;">: </span><span style="color: #F78C6C;">1</span><span style="color: #A6ACCD;"> </span></div><div class='line'><span style="color: #A6ACCD;">            </span><span style="color: #89DDFF;">));</span></div></code></pre>
<h3><a id="content-add-document-without-id" href="#content-add-document-without-id" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Add Document without _id</h3>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">The Parent Trap</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">add</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">docs</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #A6ACCD;">_id</span><span style="color: #89DDFF;">;</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">//  7IapIQBhb8W_9CdjGoe </span></div></code></pre>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">The Mighty Ducks</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">],</span><span style="color: #A6ACCD;"> _id</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">99</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">add</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">docs</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #A6ACCD;">_id</span><span style="color: #89DDFF;">;</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// 99 </span></div></code></pre>
<h2><a id="content-update-a-document" href="#content-update-a-document" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Update a Document</h2>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">The Parent Trap</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">],</span><span style="color: #A6ACCD;"> _id</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">2</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">merge</span><span style="color: #89DDFF;">([$</span><span style="color: #A6ACCD;">docs</span><span style="color: #89DDFF;">]);</span></div><div class='line'>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #A6ACCD;">name</span><span style="color: #89DDFF;">;</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// The Parent Trap </span></div></code></pre>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)</span></div><div class='line'><span style="color: #A6ACCD;">       </span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">merge</span><span style="color: #89DDFF;">([</span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">Mary Poppins</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">],</span><span style="color: #A6ACCD;"> _id</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">2</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">)]);</span></div><div class='line'>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #A6ACCD;">name</span><span style="color: #89DDFF;">;</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// Mary Poppins </span></div></code></pre>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-add-lines has-remove-lines has-diff-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Document</span><span style="color: #89DDFF;">([</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">name</span><span style="color: #89DDFF;">&#39;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">Mary Poppins</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">],</span><span style="color: #A6ACCD;"> _id</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">2</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">);</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)</span></div><div class='line line-remove line-has-background' style='background-color: #ff9cac20'><span style="color:#f07178; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">-</span><span style="color: #f07178;">       </span><span style="color: #f07178;">-&gt;</span><span style="color: #f07178;">merge</span><span style="color: #f07178;">([$</span><span style="color: #f07178;">doc</span><span style="color: #f07178;">]);</span><span style="color: #f07178;"> </span></div><div class='line line-add line-has-background' style='background-color: #89DDFF20'><span style="color:#C3E88D; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">+</span><span style="color: #C3E88D;">       </span><span style="color: #C3E88D;">-&gt;</span><span style="color: #C3E88D;">replace</span><span style="color: #C3E88D;">($</span><span style="color: #C3E88D;">doc</span><span style="color: #C3E88D;">)</span><span style="color: #C3E88D;">)</span><span style="color: #C3E88D;">;</span><span style="color: #C3E88D;"> </span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">doc</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #A6ACCD;">name</span><span style="color: #89DDFF;">;</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// Mary Poppins</span></div></code></pre>
<h2><a id="content-iterate-over-index-documents" href="#content-iterate-over-index-documents" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Iterate over Index Documents</h2>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">colelct</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">chunk</span><span style="color: #89DDFF;">(</span><span style="color: #F78C6C;">500</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">each</span><span style="color: #89DDFF;">(</span><span style="color: #C792EA;">function</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">(</span><span style="color: #FFCB6B;">Document</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">document</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">string</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">_index</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class='line'><span style="color: #89DDFF;">    </span><span style="color: #676E95;">// do something...</span></div><div class='line'><span style="color: #89DDFF;">});</span></div></code></pre>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">foreach</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">all</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">as</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movie</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class='line'><span style="color: #89DDFF;">    </span><span style="color: #676E95;">// do something...</span></div><div class='line'><span style="color: #89DDFF;">}</span></div></code></pre>
<h2><a id="content-clear-index-documents" href="#content-clear-index-documents" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Clear Index Documents</h2>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span><span style="color: #676E95;">// 100</span></div></code></pre>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-add-lines has-remove-lines has-diff-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">movies </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">);</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line line-add line-has-background' style='background-color: #89DDFF20'><span style="color:#C3E88D; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">+</span><span style="color: #C3E88D;">$</span><span style="color: #C3E88D;">movies</span><span style="color: #C3E88D;">-&gt;</span><span style="color: #C3E88D;">clear</span><span style="color: #C3E88D;">();</span><span style="color: #C3E88D;"> </span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> </span>&nbsp;</div><div class='line line-remove line-has-background' style='background-color: #ff9cac20'><span style="color:#f07178; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">-</span><span style="color: #f07178;">$</span><span style="color: #f07178;">movies</span><span style="color: #f07178;">-&gt;</span><span style="color: #f07178;">count</span><span style="color: #f07178;">();</span><span style="color: #f07178;"> </span><span style="color: #f07178;">// 100 </span></div><div class='line line-add line-has-background' style='background-color: #89DDFF20'><span style="color:#C3E88D; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">+</span><span style="color: #C3E88D;">$</span><span style="color: #C3E88D;">movies</span><span style="color: #C3E88D;">-&gt;</span><span style="color: #C3E88D;">count</span><span style="color: #C3E88D;">();</span><span style="color: #C3E88D;"> </span><span style="color: #C3E88D;">// 0 </span></div></code></pre>
<h2><a id="content-index-upsert" href="#content-index-upsert" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>Index Upsert</h2>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight has-highlight-lines' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">index</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)-&gt;</span><span style="color: #82AAFF;">delete</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">sigmie</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">collect</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">movies</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">)</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">add</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">doc</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line line-highlight line-has-background' style='background-color: #00000050'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span><span style="color: #A6ACCD;"> </span></div></code></pre>
<div class="callout info">
Consider creating an index template LINK
</div>
<h2><a id="content-more-methods" href="#content-more-methods" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>More Methods</h2>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #676E95;">//Remove document by `_id`</span></div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">remove</span><span style="color: #89DDFF;">(</span><span style="color: #FFCB6B;">_id</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">1</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #676E95;">// Check if document exists</span></div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">has</span><span style="color: #89DDFF;">(</span><span style="color: #FFCB6B;">_id</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">1</span><span style="color: #89DDFF;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #676E95;">// get all documents as an array</span></div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">toArray</span><span style="color: #89DDFF;">();</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #676E95;">// check if the index has documents</span></div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">isEmpty</span><span style="color: #89DDFF;">();</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">isNotEmpty</span><span style="color: #89DDFF;">();</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #676E95;">// get the document count</span></div><div class='line'><span style="color: #89DDFF;">$</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">();</span></div></code></pre>
<p>The collected <strong>Index</strong> implements tha <code>ArrayAccess</code> and the <code>Countable</code> interfaces in order to use the <code>isset</code> and <code>count</code> php functions.</p>
<pre><code data-theme="material-theme-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #82AAFF;">isset</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">[</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">2</span><span style="color: #89DDFF;">&#39;</span><span style="color: #89DDFF;">])</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #82AAFF;">count</span><span style="color: #89DDFF;">($</span><span style="color: #A6ACCD;">index</span><span style="color: #89DDFF;">)</span></div></code></pre>
<p>Keep in mind that integer key aren’t allowed.</p>
